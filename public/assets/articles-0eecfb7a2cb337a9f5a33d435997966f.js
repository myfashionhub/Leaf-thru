function loadFeed(e){var t=new google.feeds.Feed(e);t.setNumEntries(3),t.load(function(e){displayFeedArticle(e)})}function displayFeedArticle(e){for(var t=0;t<e.feed.entries.length;t++){var a=$("<div>").addClass("article"),r=new Date(e.feed.entries[t].publishedDate),i=($("<div>").addClass("date").append(r),$("<a>").attr("href",e.feed.entries[t].link)),d=$("<h3>").addClass("title").append(e.feed.entries[t].title),n=$("<p>").addClass("extract").html(e.feed.entries[t].content);i.attr("href").indexOf("nytimes")>-1&&n.html(n.contents().first());var l=$("<p>").addClass("publisher").attr("data",e.feed.title).html("Published by: "+e.feed.title);d.wrapInner(i),a.append(d).append(n).append(l).append(generateButtons()),$(".rss").append(a)}$(".rss .save-article").on("click",function(e){articleAction(".save-article",e)}),$(".rss .discard-article").on("click",function(e){articleAction(".discard-article",e)})}function rssFeed(){for(var e=feed-data,e=$(".rss.feed").children(),t=0;t<e.length;t++)url=$(e[t]).attr("data-feed"),loadFeed(url)}function twitterFeed(){$.ajax({url:"/twitter",dataType:"json",success:function(e){displaySocialArticle(e)}})}function displaySocialArticle(e){for(var t=0;t<e.length;t++){var a=$("<div>").addClass("article"),r=$("<h3>").addClass("title").html(e[t].title),i=$("<a>").attr("href",e[t].url),d=$("<p>").addClass("extract").html(e[t].extract),n=$("<p>").addClass("shared-by").attr("data",e[t].shared_by).html("Shared by: "),l=$("<a href='http://twitter.com/"+e[t].shared_by+"' >@"+e[t].shared_by+"</a>");n.append(l),r.wrapInner(i),a.append(r).append(d).append(n).append(generateButtons()),$(".twitter").append(a)}$(".twitter .save-article").on("click",function(e){articleAction(".save-article",e)}),$(".twitter .discard-article").on("click",function(e){articleAction(".discard-article",e)})}function generateButtons(){var e=$("<button>").addClass("save-article").html("Save article"),t=$("<button>").addClass("discard-article").html("Not interested"),a=$("<div>").addClass("buttons").append(e).append(t);return a}function articleAction(e,t){".save-article"===e&&saveArticle(t);var a=$(t.target).parent().parent();a.toggle("drop",500,function(){a.remove()})}function saveArticle(e){var t=$(e.target).parent().parent(),a=t.children().first().children().html(),r=t.children().first().children().attr("href"),i=$(t.children()[1]).html(),d=$(t.children()[2]),n=void 0,l=void 0;d.text().indexOf("Published")>-1==!1?l=d.attr("data"):n=d.attr("data"),$.ajax({url:"/articles",method:"post",dataType:"json",data:{article:{title:a,url:r,extract:i,publication:n,shared_by:l}},success:function(){console.log("saving")}})}function noArticle(){0===$(".rss").children()&&$(".twitter").append("No more article in this feed.").append("<a href='/articles'>Read saved articles ></a>"),0===$(".twitter").children()&&$(".twitter").append("No more article in this feed.").append("<a href='/articles'>Read saved articles ></a>")}